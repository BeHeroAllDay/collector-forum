@using Microsoft.AspNetCore.Identity
@using collector_forum.Data.Models
@model collector_forum.Data.Models.Item

@{
    ViewData["Title"] = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@inject SignInManager<ApplicationUser> signInManager

<div class="container body-content">
    <div class="row sectionHeader">
        <div class="sectionHeading noBorder">
            Edit item information
            <span id="headingBtn">
                <a asp-action="Index" asp-controller="Profile" asp-route-id="@Model.User.Id" class="btn btn-back">
                    Back to List
                </a>
            </span>
        </div>
    </div>
    <div class="row createPost">
        <div class="createPostSection">
            <div class="authorBlock">
                You're editing this item info as <strong>@Model.User.UserName</strong>
            </div>
            <form asp-action="Edit" asp-route-id="@Model.User.Id" method="post" id="addPostForm">
                <input type="hidden" asp-for="Id" />
                <input type="hidden" asp-for="User.Id" />
                <input type="hidden" asp-for="User.UserName" />
                <input type="hidden" asp-for="Added" />
                <input type="hidden" asp-for="Updated" value="@DateTime.Now" />

                @if (signInManager.IsSignedIn(User) || User.IsInRole("Admin") || User.IsInRole("Mod"))
                {
                    <div class="form-group">
                        <label asp-for="Name"></label>
                        <input asp-for="Name" class="form-control" />
                    </div>
                }
                else
                {
                    <input type="hidden" asp-for="Name" />
                    <div class="form-group">
                        <label asp-for="Name"></label>
                        <input asp-for="Name" class="form-control" disabled />
                    </div>
                }
                <div class="form-group">
                    <label asp-for="Description"></label>
                    <textarea asp-for="Description" class="form-control" rows="5"></textarea>
                </div>
                <button type="submit" id="submitPostBtn" class="btn btn-submitPost">
                    Update
                </button>
            </form>
        </div>
    </div>
</div>