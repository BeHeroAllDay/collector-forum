@using collector_forum.Models.Items
@using Microsoft.AspNetCore.Identity
@using collector_forum.Data.Models

@model IEnumerable<ItemListingModel>

@inject SignInManager<ApplicationUser> signInManager
@inject UserManager<ApplicationUser> userManager


@{
    ViewBag.Title = "Items list";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="Lists">
        <h1 class="headersTable">List of items selected user</h1>
    <div class="table-responsive-xl">
        <table class="table table-hover usersList">
            <tr style="font-size: 20px; marker:none;">
                <th scope="col">Name</th>
                <th scope="col">Description</th>
                <th scope="col">Author</th>
                <th scope="col">Added</th>
                <th scope="col">Updated</th>
                @if (signInManager.IsSignedIn(User) || User.IsInRole("Admin") || User.IsInRole("Mod"))
                {
                    <th scope="col" class="text-center align-middle">Action</th>
                }

            </tr>
            @foreach (var itt in Model)
            {
                <tr style="font-size: 16px;">
                    <td class="align-middle">@itt.Name</td>
                    <td class="align-middle">@itt.Description</td>
                    <td class="align-middle">@itt.UserName</td>
                    <td class="align-middle">@itt.Added</td>
                    <td class="align-middle">@itt.Updated</td>
                    @if (signInManager.IsSignedIn(User) || User.IsInRole("Admin") || User.IsInRole("Mod"))
                    {
                        <td class="text-center align-middle">
                            <div btn-group align-middle>
                                <form asp-action="Delete" asp-controller="Profile" asp-route-id="@itt.Id" method="post">
                                    <a class="btn btn-success" asp-controller="Profile" asp-action="Edit" asp-route-itemId="@itt.Id">Edit</a>
                                    <button type="submit" class="btn btn-danger"
                                            onclick="return confirm('Are you sure you want to delete post: @itt.Name')">
                                        Delete
                                    </button>
                                </form>
                            </div>
                        </td>
                    }
                </tr>
            }
        </table>
    </div>
</div>